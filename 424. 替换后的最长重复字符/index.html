<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

</body>
<script>
  /**
   * @param {string} s
   * @param {number} k
   * @return {number}
   */
  var characterReplacement = function(s, k) {
    let l = 0
    let r = 0
    let dict = {}
    let maxCount = 0
    let maxLen = 0

    while (r < s.length) {
      const char = s[r]

      dict[char] = (dict[char] || 0) + 1
      maxCount = Math.max(maxCount, dict[char])

      while (r-l+1 - maxCount > k) {
        l++
        dict[s[l]]--
      }

      maxLen = Math.max(maxLen, r-l+1)
      r++
    }

    return maxLen
  };

  characterReplacement("AABABBA", 1)
  // characterReplacement("ABAB", 2)
</script>
</html>