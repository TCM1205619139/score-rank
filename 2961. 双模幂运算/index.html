<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

</body>
<script>
  /**
   * @param {number[][]} variables
   * @param {number} target
   * @return {number[]}
   */
  var getGoodIndices = function (variables, target) {
    const powMod = (a, b, c) => {
      if (b === 1) {
        return a % c
      }
      // const mod = a ** Math.floor(b / 2) % c * a ** Math.ceil(b / 2) % c
      const mod = powMod(a, Math.floor(b / 2), c) * powMod(a, Math.ceil(b / 2), c) % c

      return mod
    }

    const indexs = []

    for (let i = 0; i < variables.length; i++) {
      const array = variables[i]
      const a = array[0]
      const b = array[1]
      const c = array[2]
      const d = array[3]

      const result = powMod(powMod(a, b, 10), c, d)
      // const result = 1

      if (result === target) {
        indexs.push(i)
      }
    }

    return indexs
  }
  // getGoodIndices([[2,3,3,10],[3,3,3,1],[6,1,1,4]], 2)
  // getGoodIndices([[2,2,3,2],[1,3,3,2],[3,2,2,3],[3,1,2,3],[1,2,3,1],[2,2,2,2],[2,1,3,1],[3,2,2,2],[2,1,3,1],[3,3,1,3]], 0)
  // getGoodIndices([[5,1,2,4],[4,5,5,5],[5,9,7,4],[7,9,6,3],[1,8,6,1],[1,1,9,9],[3,7,6,5],[2,6,2,6]], 1)
  getGoodIndices([[30,5,43,2],[15,50,35,41],[45,34,41,32],[14,37,33,13],[6,8,1,53],[37,1,12,52],[42,37,2,52],[9,2,15,3],[31,12,21,24],[52,24,6,12],[51,35,21,52],[30,18,10,2],[27,31,50,27],[29,25,26,32],[15,38,43,17],[22,12,16,43],[48,9,15,6],[41,26,22,21],[41,49,52,26],[53,38,9,33]], 1)
</script>
</html>
