<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

</body>
<script>
  // var maxProfit = function(prices) {
  //   debugger
  //   let total = 0
  //   if (prices.length <= 1) return total
  //   let buy
  //   let sale
  //   for (let i=0; i<prices.length; i++) {
  //     const grow = prices[i] < prices[i+1]
  //
  //     if (buy === undefined && grow) {
  //       buy = prices[i]
  //     }
  //     if (buy !== undefined && !grow) {
  //       sale = prices[i]
  //       total += sale - buy
  //       buy = undefined
  //       sale = undefined
  //     }
  //   }
  //   return total
  // };

  const maxProfit = function (prices) {
    if (prices.length === 1) return 0
    const dp = new Array(prices.length).fill(0).map(item => new Array(2).fill(0))
    dp[0][0] = 0
    dp[0][1] = -prices[0]

    for (let i = 1; i < prices.length; i++) {
      dp[i][0] = Math.max(dp[i-1][0], dp[i-1][1] + prices[i])
      dp[i][1] = Math.max(dp[i-1][1], dp[i-1][0] - prices[i])
    }

    return Math.max(...dp.map(item => item[0]))
  }

  console.log(maxProfit([7, 1, 5, 3, 6, 4]))
  // console.log(maxProfit([2, 1, 2, 0, 1]))
</script>
</html>