<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

</body>
<script>
  /**
   * @param {number[]} nums
   * @return {number}
   */
  var longestSubarray = function(nums) {
    let l = 0
    let r = 0
    let maxOne = 0
    let one = 0
    let zero = 0

    while (r < nums.length) {
      if (nums[r] === 0) {
        zero++
      } else {
        one++
      }

      maxOne = Math.max(one, maxOne)
      if (zero > 1) {
        l++
        r = l-1
        one = 0
        zero = 0
      }

      r++
    }

    console.log(maxOne)
    return zero === 0 ? maxOne - 1 : maxOne
  };

  longestSubarray([1,1,0,1])
  longestSubarray([1,1,1])
  longestSubarray([1,0,0,0,1,1])
  longestSubarray([1,0,1,0,1,1])
</script>
</html>